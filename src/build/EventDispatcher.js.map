{"version":3,"file":"EventDispatcher.js","sourceRoot":"","sources":["../EventDispatcher.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Created by Thomas on 04/10/2016.\n */\nclass EventDispatcher {\n\n    private _eventTarget:any;\n    public dispatcherNames:string[];\n    public nbDispatcher:number;\n    public dispatcherActifById:boolean[];\n    public dispatcherFunctionById:Array<Array<Function>>;\n    public debug:string;\n\n    public eventData:any;   // Ajouter par Shane le 05/03/2019, permet de stocker des valeurs pendant un event\n\n    public static ENTER:number = 13;    // Ajouter par shane\n    public static ESCAPE:number = 27;\n    public static DEL:number = 46;\n\n    public autoCleanEventData:boolean = true;\n\n    constructor(eventEmitter:EventDispatcher=null){\n        if(eventEmitter==null) this._eventTarget = this;\n        else this._eventTarget = eventEmitter;\n\n        /*\n        if(eventEmitter != null){\n            //////////////////////////////////console.log(\"EVENT EMITTER :\")\n            //////////////////////////////////console.log(this);\n        }\n        */\n\n        this.dispatcherNames = [];\n        this.nbDispatcher = 0;\n        this.dispatcherActifById = [];\n        this.dispatcherFunctionById = [];\n\n\n    }\n\n    public hasEventListener(eventName:string):boolean{\n      return this.dispatcherNames.lastIndexOf(eventName) != -1;\n    }\n\n\n    public get eventTarget():any{\n        return this._eventTarget;\n    }\n\n    public addEventListener(name:string,func:Function,overrideExistingEventIfExists:boolean=false){\n        if(name == undefined || func == undefined) return;\n\n        var nameId = this.dispatcherNames.indexOf(name);\n        if(nameId == -1){\n            this.dispatcherActifById[this.nbDispatcher] = false;\n            this.dispatcherFunctionById[this.nbDispatcher] = [];\n            nameId = this.nbDispatcher;\n            this.dispatcherNames[this.nbDispatcher++] = name;\n        }\n\n        if(overrideExistingEventIfExists) this.dispatcherFunctionById[nameId] = [func];\n        else this.dispatcherFunctionById[nameId].push(func);\n\n    }\n    public setEventTarget(target:any){\n        this._eventTarget = target;\n    }\n    public clearEvents():void{\n        this.dispatcherNames = [];\n        this.nbDispatcher = 0;\n        this.dispatcherActifById = [];\n        this.dispatcherFunctionById = [];\n\n    }\n\n    public removeEventListener(name:string,func:Function=null){\n        //A REVOIR\n        var id = this.dispatcherNames.indexOf(name);\n        if(id == -1) return;\n\n\n        if(!func){\n           this.dispatcherFunctionById[id] = [];\n           return;\n        }\n\n        var functions:Array<Function> = this.dispatcherFunctionById[id]\n        var id2:number = functions.indexOf(func);\n        if(id2 == -1) return;\n        functions.splice(id2,1);\n    }\n\n\n    public applyEvents(object:any=null){\n        var len:number = this.dispatcherNames.length;\n        if(0 == len) return;\n\n        var i:number, j:number,len2:number;\n        var funcs:Array<Function>;\n        for(i=0;i<len;i++){\n\n            if(this.dispatcherActifById[i] == true){\n\n                this.dispatcherActifById[i] = false;\n                funcs = this.dispatcherFunctionById[i];\n                if(funcs){\n                  len2 = funcs.length;\n                  for(j=0;j<len2;j++) funcs[j](this,object,this.dispatcherNames[i]);\n                }else{\n                  console.warn(\"EventDispatcher.applyEvents bug ? -> \",this.dispatcherNames[i])\n                }\n            }\n\n        }\n    }\n\n    public dispatchEvent(eventName:string,object:any=null,applyEvents:boolean=true){\n        var th:EventDispatcher = this;\n        if(!th.dispatcherNames) return;\n\n        if(this._eventTarget instanceof EventDispatcher) th = this._eventTarget;\n\n        if(!object) object = this;\n\n        var id:number = th.dispatcherNames.indexOf(eventName);\n        if(id == -1) return;\n        th.dispatcherActifById[id] = true;\n        if(applyEvents) th.applyEvents(object);\n        if (this.eventData && this.autoCleanEventData) this.eventData = null;\n    }\n}\n"]}